<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleship Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="themes.css">
</head>
<body>
    <div id="home-screen" class="home-screen">
        <!-- Top-right controls for home screen -->
        <div class="home-top-right-controls">
            <div class="theme-selector">
                <label for="theme-dropdown">Theme:</label>
                <select id="theme-dropdown" class="theme-dropdown">
                    <option value="original">Original</option>
                    <option value="space">Outer Space</option>
                    <option value="pirate">Pirate</option>
                </select>
            </div>
            <button id="music-toggle-btn" class="music-toggle-btn" title="Toggle Background Music">
                <span class="music-icon">üîá</span>
                <span class="music-text">Music: Off</span>
            </button>
        </div>
        
        <!-- SVG Wave Waterline - Repeating pattern for seamless animation -->
        <svg class="ocean-wave" viewBox="0 0 1200 60" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
            <!-- First wave pattern -->
            <path d="M 0,30 Q 150,10 300,30 T 600,30 T 900,30 T 1200,30 L 1200,60 L 0,60 Z" fill="#1A5276" opacity="0.95"/>
            <path d="M 0,30 Q 150,10 300,30 T 600,30 T 900,30 T 1200,30" stroke="rgba(255, 255, 255, 0.6)" stroke-width="2" fill="none"/>
            <!-- Second wave pattern (duplicate for seamless tiling) -->
            <path d="M 1200,30 Q 1350,10 1500,30 T 1800,30 T 2100,30 T 2400,30 L 2400,60 L 1200,60 Z" fill="#1A5276" opacity="0.95"/>
            <path d="M 1200,30 Q 1350,10 1500,30 T 1800,30 T 2100,30 T 2400,30" stroke="rgba(255, 255, 255, 0.6)" stroke-width="2" fill="none"/>
        </svg>
        
        <div class="home-content">
            <h1 class="home-title">Battleship</h1>
            <p class="theme-label" id="theme-label">Original</p>
            
            <div class="ship-display">
                <div class="ship-container">
                    <!-- Ship above waterline -->
                    <svg width="300" height="120" viewBox="0 0 300 120" class="ship-svg">
                    <!-- Hull -->
                    <path d="M 10,85 L 20,75 L 280,75 L 290,85 L 290,95 L 10,95 Z" fill="#2c3e50" stroke="#1a252f" stroke-width="2"/>
                    
                    <!-- Deck -->
                    <rect x="20" y="75" width="260" height="5" fill="#34495e"/>
                    
                    <!-- Bow (front) -->
                    <polygon points="280,75 295,80 295,90 280,95" fill="#1a252f"/>
                    
                    <!-- Forward turret base -->
                    <rect x="40" y="60" width="30" height="15" rx="3" fill="#34495e" stroke="#1a252f" stroke-width="1.5"/>
                    <!-- Forward turret guns -->
                    <rect x="48" y="50" width="5" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    <rect x="57" y="50" width="5" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    
                    <!-- Bridge/Superstructure -->
                    <rect x="120" y="45" width="50" height="30" fill="#34495e" stroke="#1a252f" stroke-width="1.5"/>
                    <rect x="130" y="35" width="30" height="15" fill="#2c3e50" stroke="#1a252f" stroke-width="1.5"/>
                    <!-- Bridge windows -->
                    <rect x="135" y="40" width="4" height="4" fill="#5DADE2"/>
                    <rect x="142" y="40" width="4" height="4" fill="#5DADE2"/>
                    <rect x="149" y="40" width="4" height="4" fill="#5DADE2"/>
                    <rect x="156" y="40" width="4" height="4" fill="#5DADE2"/>
                    
                    <!-- Radar mast -->
                    <rect x="148" y="25" width="4" height="12" fill="#2c3e50"/>
                    <circle cx="150" cy="24" r="3" fill="#e74c3c"/>
                    
                    <!-- Mid turret base -->
                    <rect x="190" y="58" width="32" height="17" rx="3" fill="#34495e" stroke="#1a252f" stroke-width="1.5"/>
                    <!-- Mid turret guns -->
                    <rect x="197" y="48" width="6" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    <rect x="207" y="48" width="6" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    
                    <!-- Aft turret base -->
                    <rect x="235" y="60" width="30" height="15" rx="3" fill="#34495e" stroke="#1a252f" stroke-width="1.5"/>
                    <!-- Aft turret guns -->
                    <rect x="243" y="50" width="5" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    <rect x="252" y="50" width="5" height="15" rx="1" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    
                    <!-- Smoke stacks -->
                    <rect x="95" y="55" width="12" height="20" rx="2" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    <rect x="180" y="55" width="12" height="20" rx="2" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                    
                    <!-- Waterline -->
                    <line x1="10" y1="95" x2="290" y2="95" stroke="#1a252f" stroke-width="2"/>
                    
                    <!-- Hull details/rivets -->
                    <circle cx="50" cy="85" r="1.5" fill="#1a252f"/>
                    <circle cx="80" cy="85" r="1.5" fill="#1a252f"/>
                    <circle cx="110" cy="85" r="1.5" fill="#1a252f"/>
                    <circle cx="220" cy="85" r="1.5" fill="#1a252f"/>
                    <circle cx="250" cy="85" r="1.5" fill="#1a252f"/>
                </svg>
                
                <!-- Spaceship for Outer Space theme -->
                <svg width="300" height="120" viewBox="0 0 300 120" class="spaceship-svg">
                    <!-- Main hull - sleek futuristic shape -->
                    <ellipse cx="150" cy="85" rx="140" ry="20" fill="url(#spaceshipGradient)" stroke="#2d3748" stroke-width="2"/>
                    
                    <!-- Cockpit/Bridge section -->
                    <ellipse cx="150" cy="70" rx="45" ry="18" fill="url(#cockpitGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    <ellipse cx="150" cy="68" rx="35" ry="12" fill="url(#windowGradient)" stroke="#4a5568" stroke-width="1"/>
                    
                    <!-- Cockpit windows -->
                    <ellipse cx="140" cy="68" rx="6" ry="4" fill="#667eea" opacity="0.8"/>
                    <ellipse cx="150" cy="68" rx="6" ry="4" fill="#667eea" opacity="0.8"/>
                    <ellipse cx="160" cy="68" rx="6" ry="4" fill="#667eea" opacity="0.8"/>
                    
                    <!-- Wing structures -->
                    <path d="M 30,85 Q 20,80 15,85 L 20,95 Q 25,90 30,95 Z" fill="url(#wingGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    <path d="M 270,85 Q 280,80 285,85 L 280,95 Q 275,90 270,95 Z" fill="url(#wingGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    
                    <!-- Engine pods -->
                    <rect x="50" y="88" width="20" height="12" rx="3" fill="url(#engineGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    <rect x="230" y="88" width="20" height="12" rx="3" fill="url(#engineGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    
                    <!-- Engine glow -->
                    <ellipse cx="55" cy="94" rx="8" ry="5" fill="#667eea" opacity="0.6" class="engine-glow-left"/>
                    <ellipse cx="245" cy="94" rx="8" ry="5" fill="#667eea" opacity="0.6" class="engine-glow-right"/>
                    
                    <!-- Panel lines and details -->
                    <line x1="80" y1="85" x2="220" y2="85" stroke="#4a5568" stroke-width="1" opacity="0.5"/>
                    <line x1="90" y1="90" x2="210" y2="90" stroke="#4a5568" stroke-width="0.5" opacity="0.4"/>
                    
                    <!-- Small detail lights -->
                    <circle cx="100" cy="82" r="1.5" fill="#a78bfa" opacity="0.8"/>
                    <circle cx="120" cy="82" r="1.5" fill="#a78bfa" opacity="0.8"/>
                    <circle cx="180" cy="82" r="1.5" fill="#a78bfa" opacity="0.8"/>
                    <circle cx="200" cy="82" r="1.5" fill="#a78bfa" opacity="0.8"/>
                    
                    <!-- Antenna/sensor -->
                    <line x1="150" y1="60" x2="150" y2="50" stroke="#5a67d8" stroke-width="2"/>
                    <circle cx="150" cy="48" r="3" fill="#667eea" opacity="0.9"/>
                    
                    <!-- Nose cone -->
                    <path d="M 285,85 Q 295,85 298,90 Q 295,95 285,95 Z" fill="url(#noseGradient)" stroke="#2d3748" stroke-width="1.5"/>
                    
                    <!-- Gradients -->
                    <defs>
                        <linearGradient id="spaceshipGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#5a67d8;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#4a5568;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#2d3748;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="cockpitGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#4a5568;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="windowGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:0.6" />
                            <stop offset="100%" style="stop-color:#667eea;stop-opacity:0.3" />
                        </linearGradient>
                        <linearGradient id="wingGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#4a5568;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#2d3748;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="engineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#2d3748;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#667eea;stop-opacity:0.8" />
                        </linearGradient>
                        <linearGradient id="noseGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#4a5568;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#667eea;stop-opacity:0.9" />
                        </linearGradient>
                    </defs>
                </svg>
                
                <!-- Pirate Ship for Pirate theme -->
                <svg width="300" height="120" viewBox="0 0 300 120" class="pirate-ship-svg">
                    <!-- Lower hull (darker wood) -->
                    <path d="M 20,92 Q 25,88 40,86 L 260,86 Q 275,88 280,92 Q 278,98 270,99 L 30,99 Q 22,98 20,92 Z" 
                          fill="url(#darkHullGradient)" stroke="#2d1f1a" stroke-width="2.5"/>
                    
                    <!-- Upper hull (lighter wood) with curve -->
                    <path d="M 25,82 Q 30,78 50,76 L 250,76 Q 270,78 275,82 L 280,88 Q 275,86 260,86 L 40,86 Q 25,86 20,88 Z" 
                          fill="url(#lightHullGradient)" stroke="#3e2723" stroke-width="2"/>
                    
                    <!-- Raised stern castle (back elevated section) -->
                    <path d="M 20,88 L 22,72 L 30,68 L 45,70 L 48,76 L 25,82 Z" 
                          fill="url(#sternCastleGradient)" stroke="#3e2723" stroke-width="2"/>
                    <rect x="22" y="72" width="23" height="4" fill="#6d4c41" stroke="#3e2723" stroke-width="1"/>
                    
                    <!-- Pointed bow (front) -->
                    <path d="M 275,82 L 288,86 L 290,90 L 288,94 L 280,92 Z" 
                          fill="url(#bowGradient)" stroke="#3e2723" stroke-width="2"/>
                    
                    <!-- Wood planking lines -->
                    <line x1="30" y1="80" x2="270" y2="80" stroke="#5d4037" stroke-width="1.2" opacity="0.6"/>
                    <line x1="28" y1="88" x2="272" y2="88" stroke="#4a3728" stroke-width="1.2" opacity="0.5"/>
                    <line x1="26" y1="94" x2="274" y2="94" stroke="#3e2723" stroke-width="1" opacity="0.4"/>
                    
                    <!-- Deck -->
                    <ellipse cx="150" cy="76" rx="120" ry="8" fill="url(#deckGradient)" stroke="#3e2723" stroke-width="1.5"/>
                    
                    <!-- Forward mast -->
                    <rect x="90" y="18" width="5" height="58" fill="#4a3728" stroke="#3e2723" stroke-width="1.5"/>
                    
                    <!-- Main mast (tallest) -->
                    <rect x="147" y="10" width="6" height="66" fill="#4a3728" stroke="#3e2723" stroke-width="1.5"/>
                    
                    <!-- Aft mast -->
                    <rect x="210" y="22" width="5" height="54" fill="#4a3728" stroke="#3e2723" stroke-width="1.5"/>
                    
                    <!-- Forward sail (large, curved) -->
                    <path d="M 92,22 Q 75,40 92,58 L 92,70 Q 120,55 120,40 Q 120,25 92,22 Z" 
                          fill="url(#sailGradient)" stroke="#8b7355" stroke-width="1.5" class="pirate-sail"/>
                    <path d="M 92,22 Q 100,30 106,40 Q 100,50 92,58" 
                          stroke="#d2b48c" stroke-width="1" fill="none" opacity="0.4"/>
                    
                    <!-- Main sail (largest, curved) -->
                    <path d="M 150,14 Q 130,38 150,62 L 150,72 Q 185,55 185,38 Q 185,21 150,14 Z" 
                          fill="url(#sailGradient)" stroke="#8b7355" stroke-width="1.5" class="pirate-sail"/>
                    <path d="M 150,14 Q 160,28 168,42 Q 160,56 150,62" 
                          stroke="#d2b48c" stroke-width="1" fill="none" opacity="0.4"/>
                    
                    <!-- Aft sail (curved) -->
                    <path d="M 212,26 Q 195,42 212,58 L 212,68 Q 240,52 240,42 Q 240,32 212,26 Z" 
                          fill="url(#sailGradient)" stroke="#8b7355" stroke-width="1.5" class="pirate-sail"/>
                    <path d="M 212,26 Q 220,36 226,46 Q 220,52 212,58" 
                          stroke="#d2b48c" stroke-width="1" fill="none" opacity="0.4"/>
                    
                    <!-- Rigging ropes between masts -->
                    <line x1="92" y1="18" x2="150" y2="10" stroke="#3e2723" stroke-width="1.2" opacity="0.7"/>
                    <line x1="153" y1="10" x2="212" y2="22" stroke="#3e2723" stroke-width="1.2" opacity="0.7"/>
                    <line x1="92" y1="70" x2="150" y2="72" stroke="#3e2723" stroke-width="1" opacity="0.6"/>
                    <line x1="153" y1="72" x2="212" y2="68" stroke="#3e2723" stroke-width="1" opacity="0.6"/>
                    
                    <!-- Horizontal rigging on masts -->
                    <line x1="87" y1="35" x2="95" y2="35" stroke="#3e2723" stroke-width="0.8" opacity="0.6"/>
                    <line x1="87" y1="50" x2="95" y2="50" stroke="#3e2723" stroke-width="0.8" opacity="0.6"/>
                    <line x1="144" y1="30" x2="153" y2="30" stroke="#3e2723" stroke-width="0.8" opacity="0.6"/>
                    <line x1="144" y1="48" x2="153" y2="48" stroke="#3e2723" stroke-width="0.8" opacity="0.6"/>
                    <line x1="207" y1="40" x2="215" y2="40" stroke="#3e2723" stroke-width="0.8" opacity="0.6"/>
                    
                    <!-- Crow's nest on main mast -->
                    <rect x="142" y="13" width="16" height="5" rx="1" fill="#5d4037" stroke="#3e2723" stroke-width="1"/>
                    
                    <!-- Cannon ports (dark openings) -->
                    <circle cx="50" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    <circle cx="90" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    <circle cx="130" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    <circle cx="170" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    <circle cx="210" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    <circle cx="250" cy="84" r="3" fill="#1a1a1a" opacity="0.8"/>
                    
                    <!-- Stern castle railings -->
                    <line x1="22" y1="72" x2="45" y2="70" stroke="#5d4037" stroke-width="1.5" opacity="0.7"/>
                    <line x1="24" y1="76" x2="46" y2="74" stroke="#5d4037" stroke-width="1" opacity="0.5"/>
                    
                    <!-- Gradients -->
                    <defs>
                        <linearGradient id="darkHullGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#654321;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#3e2723;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="lightHullGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#a0826d;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#8b4513;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#654321;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="sternCastleGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#8b4513;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5d4037;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="bowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#654321;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#8b4513;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="deckGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#a0826d;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#6d4c41;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="sailGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#f5f5dc;stop-opacity:1" />
                            <stop offset="30%" style="stop-color:#ede0c8;stop-opacity:1" />
                            <stop offset="70%" style="stop-color:#e8d5b7;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#d2b48c;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
                
                </div>
            </div>
            
            <div class="home-buttons">
                <button id="how-to-play-btn" class="how-to-play-btn">How to Play</button>
                <button id="play-now-btn" class="play-now-btn">Play Now</button>
            </div>
            
            <p class="home-subtitle">Command your fleet and sink the enemy!</p>
        </div>
    </div>

    <!-- Difficulty Selection Modal -->
    <div id="difficulty-modal" class="difficulty-modal" style="display: none;">
        <div class="difficulty-content">
            <button id="close-difficulty-btn" class="close-modal-btn">&times;</button>
            <h2>Select Difficulty</h2>
            <p class="difficulty-description">Choose your challenge level:</p>
            <div class="difficulty-buttons">
                <button id="easy-mode-btn" class="difficulty-btn easy-btn">Easy Mode</button>
                <button id="medium-mode-btn" class="difficulty-btn medium-btn">Medium Mode</button>
                <button id="hard-mode-btn" class="difficulty-btn hard-btn">Hard Mode</button>
            </div>
        </div>
    </div>

    <!-- Placement Confirmation Modal -->
    <div id="placement-confirmation-modal" class="placement-confirmation-modal" style="display: none;">
        <div class="placement-confirmation-content">
            <h2>Ready to Play?</h2>
            <p>All ships have been placed. Are you ready to start the game?</p>
            <div class="confirmation-buttons">
                <button id="keep-editing-btn" class="keep-editing-btn">Keep Editing</button>
                <button id="start-game-btn" class="start-game-btn">Start Game</button>
            </div>
        </div>
    </div>

    <!-- End of Game Modal -->
    <div id="end-game-modal" class="end-game-modal" style="display: none;">
        <div class="end-game-content">
            <h2 id="end-game-title">Victory</h2>
            <p id="end-game-subtitle" class="end-game-subtitle">All enemy ships sunk!</p>
            
            <div class="end-game-stats">
                <div class="stats-section">
                    <h3>Your Performance</h3>
                    <div class="stat-row">
                        <span class="stat-label">Shots Taken:</span>
                        <span id="player-shots" class="stat-value">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Hits:</span>
                        <span id="player-hits" class="stat-value">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Accuracy:</span>
                        <span id="player-accuracy" class="stat-value">0%</span>
                    </div>
                </div>
                
                <div class="stats-section">
                    <h3>AI Performance</h3>
                    <div class="stat-row">
                        <span class="stat-label">Shots Taken:</span>
                        <span id="ai-shots" class="stat-value">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Hits:</span>
                        <span id="ai-hits" class="stat-value">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Accuracy:</span>
                        <span id="ai-accuracy" class="stat-value">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="end-game-buttons">
                <button id="play-again-btn" class="play-again-btn">Play Again</button>
                <button id="back-home-btn" class="back-home-btn">Back to Home</button>
            </div>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div id="instructions-modal" class="instructions-modal" style="display: none;">
        <div class="instructions-content">
            <h2>How to Play Battleship</h2>
            
            <div class="instructions-section">
                <h3>üéØ Objective</h3>
                <p>Sink all 5 enemy ships before the AI sinks yours!</p>
            </div>
            
            <div class="instructions-section">
                <h3>üéÆ Getting Started</h3>
                <p><strong>Theme Selection:</strong> Choose your visual theme from the dropdown on the home screen:</p>
                <ul class="difficulty-list">
                    <li><strong>Original:</strong> Classic naval battleship theme with traditional ship names</li>
                    <li><strong>Pirate:</strong> High seas adventure with pirate ship names (Galleon, Frigate, Brigantine, Ketch, Sloop)</li>
                    <li><strong>Outer Space:</strong> Sci-fi theme with space ship names (Star Carrier, Battlecruiser, Interceptor, Stealth Frigate, Scout Skiff)</li>
                </ul>
                <p><strong>Play Now:</strong> Click this button on the home screen to begin.</p>
                <p><strong>Difficulty Selection:</strong> Choose your challenge level (you can close this modal with the X button to return to home):</p>
                <ul class="difficulty-list">
                    <li><strong>Easy:</strong> AI fires randomly with no strategy</li>
                    <li><strong>Medium:</strong> AI uses hunt/target strategy with checkerboard pattern and finishes ships it finds</li>
                    <li><strong>Hard:</strong> AI uses advanced probability-based targeting, strategic ship placement, and ruthlessly efficient ship finishing</li>
                </ul>
            </div>
            
            <div class="instructions-section">
                <h3>üö¢ Ship Placement Phase</h3>
                <p><strong>Drag & Drop:</strong> Drag ships from the tray on the left onto your grid.</p>
                <p><strong>Rotate:</strong> Press <kbd>R</kbd> key or click the <strong>Rotate (R)</strong> button to change orientation (horizontal/vertical).</p>
                <p><strong>Remove/Move Ships:</strong> Click a placed ship on the grid to remove it, then drag it to a new position.</p>
                <p><strong>Random Button:</strong> Automatically places all ships randomly on your grid.</p>
                <p><strong>Reset Button:</strong> Removes all placed ships so you can start over.</p>
                <p><strong>Valid Placement:</strong> Ships turn <span class="valid-color">green</span> when placement is valid, <span class="invalid-color">red</span> when invalid.</p>
                <p><strong>Ready to Play:</strong> Once all 5 ships are placed, a confirmation modal appears. Click <strong>Start Game</strong> to begin or <strong>Keep Editing</strong> to adjust placement.</p>
                <p class="ship-sizes"><strong>Ships:</strong> 5 ships of varying sizes (5, 4, 3, 3, 2 cells). Ship names change based on your selected theme!</p>
            </div>
            
            <div class="instructions-section">
                <h3>‚öîÔ∏è Combat Phase</h3>
                <p><strong>Your Turn:</strong> Click any cell on the enemy grid (right) to fire.</p>
                <p><strong>Hit:</strong> <span class="hit-indicator">Red X (‚úï)</span> means you hit an enemy ship!</p>
                <p><strong>Miss:</strong> <span class="miss-indicator">Gray circle (‚óã)</span> means you missed.</p>
                <p><strong>Sunk Ship:</strong> When a ship is fully destroyed, it turns <span class="sunk-indicator">darker red</span> and the full ship shape is revealed on the enemy grid.</p>
                <p><strong>AI Turn:</strong> After you fire, the AI automatically fires at your grid. Watch your fleet!</p>
                <p><strong>Ship Status:</strong> Below each grid, see which ships are still active or sunk.</p>
            </div>
            
            <div class="instructions-section">
                <h3>üèÜ Game End</h3>
                <p>The game ends when all ships on one side are sunk.</p>
                <p><strong>Victory/Defeat Modal:</strong> Shows final stats including shots taken, hits, and accuracy for both you and the AI.</p>
                <p><strong>Play Again:</strong> Start a new game with difficulty selection.</p>
                <p><strong>Back to Home:</strong> Return to the home screen.</p>
            </div>
            
            <div class="instructions-section">
                <h3>üéõÔ∏è Controls & Buttons</h3>
                <ul class="controls-list">
                    <li><strong>New Game:</strong> Restart at any time (returns to difficulty selection)</li>
                    <li><strong>X Button:</strong> Return to home screen and reset the game</li>
                    <li><strong>R Key:</strong> Rotate ships during placement phase</li>
                    <li><strong>How to Play:</strong> Opens this help modal</li>
                    <li><strong>Music Toggle:</strong> Turn background music on/off (button in top-right corner)</li>
                    <li><strong>Theme Selector:</strong> Change visual theme at any time from the home screen</li>
                </ul>
            </div>
            
            <div class="instructions-section">
                <h3>üìã Game Rules</h3>
                <ul class="rules-list">
                    <li>You cannot fire at the same cell twice</li>
                    <li>Ships may touch each other but cannot overlap</li>
                    <li>Ships are placed horizontally or vertically (not diagonally)</li>
                    <li>The game ends immediately when all ships of one side are sunk</li>
                </ul>
            </div>
            
            <button id="close-instructions-btn" class="close-instructions-btn">Got It!</button>
        </div>
    </div>

    <div id="game-screen" class="container" style="display: none;">
        <h1>Battleship</h1>
        
        <div class="status-bar">
            <div class="status-left">
                <div id="status-message">Click "New Game" to start!</div>
                <div id="difficulty-indicator" class="difficulty-indicator" style="display: none;"></div>
            </div>
            <div class="status-buttons">
                <button class="music-toggle-btn" title="Toggle Background Music">
                    <span class="music-icon">üîá</span>
                    <span class="music-text">Music: Off</span>
                </button>
                <button id="close-btn" class="close-btn" title="Return to Home">‚úï</button>
                <button id="new-game-btn">New Game</button>
            </div>
        </div>

        <div id="placement-phase" class="placement-phase" style="display: none;">
            <div class="placement-controls">
                <div class="placement-header">
                    <h2>Place Your Ships</h2>
                    <p class="placement-hint">Drag ships from the tray to your grid below. Press R or click Rotate to change orientation.</p>
                </div>
                <div class="placement-buttons">
                    <button id="random-btn" class="random-btn">Random</button>
                    <button id="reset-btn" class="reset-btn">Reset</button>
                    <button id="rotate-btn" class="rotate-btn">Rotate (R)</button>
                </div>
            </div>
            
            <div class="placement-layout">
                <div class="ship-tray">
                    <div class="tray-ship" draggable="true" data-ship="Carrier" data-size="5">
                        <span class="ship-name">Carrier</span>
                        <svg class="ship-visual ship-visual-default" width="200" height="40" viewBox="0 0 200 40">
                            <rect x="0" y="15" width="200" height="10" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                            <polygon points="195,15 200,20 200,25 195,25" fill="#1a252f"/>
                            <rect x="10" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="12" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="16" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="80" y="8" width="20" height="10" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="85" y="5" width="10" height="5" fill="#2c3e50"/>
                            <rect x="120" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="122" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="126" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="160" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="162" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="166" y="7" width="2" height="6" fill="#2c3e50"/>
                        </svg>
                        <svg class="ship-visual ship-visual-pirate" width="200" height="40" viewBox="0 0 200 40">
                            <!-- Galleon (5 cells) - Large with 3 masts -->
                            <path d="M 5,22 L 10,18 L 190,18 L 195,22 L 195,26 L 5,26 Z" fill="#8b4513" stroke="#5d4037" stroke-width="1"/>
                            <rect x="30" y="8" width="2" height="12" fill="#5d4037"/>
                            <path d="M 31,9 L 38,12 L 38,18 L 31,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                            <rect x="90" y="6" width="2" height="14" fill="#5d4037"/>
                            <path d="M 91,7 L 100,11 L 100,18 L 91,15 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                            <rect x="150" y="8" width="2" height="12" fill="#5d4037"/>
                            <path d="M 151,9 L 158,12 L 158,18 L 151,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <div class="tray-ship" draggable="true" data-ship="Battleship" data-size="4">
                        <span class="ship-name">Battleship</span>
                        <svg class="ship-visual ship-visual-default" width="160" height="40" viewBox="0 0 160 40">
                            <rect x="0" y="15" width="160" height="10" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                            <polygon points="155,15 160,20 160,25 155,25" fill="#1a252f"/>
                            <rect x="15" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="17" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="21" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="70" y="8" width="20" height="10" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="75" y="5" width="10" height="5" fill="#2c3e50"/>
                            <rect x="120" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="122" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="126" y="7" width="2" height="6" fill="#2c3e50"/>
                        </svg>
                        <svg class="ship-visual ship-visual-pirate" width="160" height="40" viewBox="0 0 160 40">
                            <!-- Frigate (4 cells) - Medium with 2 masts -->
                            <path d="M 5,22 L 10,18 L 150,18 L 155,22 L 155,26 L 5,26 Z" fill="#8b4513" stroke="#5d4037" stroke-width="1"/>
                            <rect x="40" y="8" width="2" height="12" fill="#5d4037"/>
                            <path d="M 41,9 L 50,12 L 50,18 L 41,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                            <rect x="110" y="8" width="2" height="12" fill="#5d4037"/>
                            <path d="M 111,9 L 120,12 L 120,18 L 111,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <div class="tray-ship" draggable="true" data-ship="Cruiser" data-size="3">
                        <span class="ship-name">Cruiser</span>
                        <svg class="ship-visual ship-visual-default" width="120" height="40" viewBox="0 0 120 40">
                            <rect x="0" y="15" width="120" height="10" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                            <polygon points="115,15 120,20 120,25 115,25" fill="#1a252f"/>
                            <rect x="20" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="22" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="26" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="55" y="8" width="18" height="10" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="60" y="5" width="8" height="5" fill="#2c3e50"/>
                        </svg>
                        <svg class="ship-visual ship-visual-pirate" width="120" height="40" viewBox="0 0 120 40">
                            <!-- Brigantine (3 cells) - 2 masts, smaller -->
                            <path d="M 5,22 L 10,18 L 110,18 L 115,22 L 115,26 L 5,26 Z" fill="#8b4513" stroke="#5d4037" stroke-width="1"/>
                            <rect x="35" y="9" width="2" height="11" fill="#5d4037"/>
                            <path d="M 36,10 L 43,13 L 43,18 L 36,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                            <rect x="75" y="9" width="2" height="11" fill="#5d4037"/>
                            <path d="M 76,10 L 83,13 L 83,18 L 76,16 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <div class="tray-ship" draggable="true" data-ship="Submarine" data-size="3">
                        <span class="ship-name">Submarine</span>
                        <svg class="ship-visual ship-visual-default" width="120" height="40" viewBox="0 0 120 40">
                            <ellipse cx="60" cy="20" rx="58" ry="8" fill="#34495e" stroke="#1a252f" stroke-width="1"/>
                            <rect x="55" y="12" width="10" height="8" fill="#2c3e50" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="58" y="8" width="4" height="6" fill="#2c3e50" stroke="#1a252f" stroke-width="0.5"/>
                            <circle cx="60" cy="7" r="2" fill="#e74c3c"/>
                            <ellipse cx="110" cy="20" rx="8" ry="6" fill="#1a252f"/>
                        </svg>
                        <svg class="ship-visual ship-visual-pirate" width="120" height="40" viewBox="0 0 120 40">
                            <!-- Ketch (3 cells) - 2 masts, different sail config -->
                            <path d="M 5,22 L 10,18 L 110,18 L 115,22 L 115,26 L 5,26 Z" fill="#8b4513" stroke="#5d4037" stroke-width="1"/>
                            <rect x="30" y="10" width="2" height="10" fill="#5d4037"/>
                            <path d="M 31,11 L 37,13 L 37,18 L 31,17 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                            <rect x="80" y="12" width="2" height="8" fill="#5d4037"/>
                            <path d="M 81,13 L 86,15 L 86,18 L 81,17 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <div class="tray-ship" draggable="true" data-ship="Destroyer" data-size="2">
                        <span class="ship-name">Destroyer</span>
                        <svg class="ship-visual ship-visual-default" width="80" height="40" viewBox="0 0 80 40">
                            <rect x="0" y="15" width="80" height="10" fill="#2c3e50" stroke="#1a252f" stroke-width="1"/>
                            <polygon points="75,15 80,20 80,25 75,25" fill="#1a252f"/>
                            <rect x="25" y="10" width="12" height="8" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="27" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="31" y="7" width="2" height="6" fill="#2c3e50"/>
                            <rect x="35" y="8" width="15" height="10" fill="#34495e" stroke="#1a252f" stroke-width="0.5"/>
                            <rect x="40" y="5" width="5" height="5" fill="#2c3e50"/>
                        </svg>
                        <svg class="ship-visual ship-visual-pirate" width="80" height="40" viewBox="0 0 80 40">
                            <!-- Sloop (2 cells) - Single mast, small -->
                            <path d="M 5,22 L 10,18 L 70,18 L 75,22 L 75,26 L 5,26 Z" fill="#8b4513" stroke="#5d4037" stroke-width="1"/>
                            <rect x="35" y="10" width="2" height="10" fill="#5d4037"/>
                            <path d="M 36,11 L 44,14 L 44,18 L 36,17 Z" fill="#f5deb3" stroke="#8b7355" stroke-width="0.5"/>
                        </svg>
                    </div>
                </div>
                
                <div class="placement-grid-section">
                    <h2>Your Fleet</h2>
                    <div id="placement-grid" class="grid"></div>
                </div>
            </div>
        </div>

        <div class="game-container" style="display: none;">
            <div class="grid-section">
                <h2>Your Fleet</h2>
                <div id="player-grid" class="grid"></div>
                <div class="ships-status">
                    <h3>Your Ships:</h3>
                    <div id="player-ships-list"></div>
                </div>
            </div>

            <div class="grid-section">
                <h2>Enemy Waters</h2>
                <div id="ai-grid" class="grid"></div>
                <div class="ships-status">
                    <h3>Enemy Ships:</h3>
                    <div id="ai-ships-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
